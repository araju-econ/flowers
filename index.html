<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>âœ¿ FLOWER GARDEN âœ¿</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ¸</text></svg>" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: #0a0014;
      font-family: 'Press Start 2P', monospace;
      cursor: default;
    }

    /* â”€â”€ Pixel grid background â”€â”€ */
    #bg {
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(160, 0, 255, 0.06) 1px, transparent 1px),
        linear-gradient(90deg, rgba(160, 0, 255, 0.06) 1px, transparent 1px);
      background-size: 16px 16px;
      z-index: 0;
    }

    /* â”€â”€ CRT scanlines â”€â”€ */
    #scanlines {
      position: fixed;
      inset: 0;
      z-index: 900;
      pointer-events: none;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 3px,
        rgba(0, 0, 0, 0.06) 3px,
        rgba(0, 0, 0, 0.06) 4px
      );
    }

    /* â”€â”€ CRT vignette â”€â”€ */
    #vignette {
      position: fixed;
      inset: 0;
      z-index: 901;
      pointer-events: none;
      background: radial-gradient(ellipse at center,
        transparent 55%, rgba(0, 0, 0, 0.75) 100%);
    }

    /* â”€â”€ Garden â”€â”€ */
    #garden {
      position: fixed;
      inset: 0;
      z-index: 1;
      overflow: hidden;
    }

    /* â”€â”€ Flower sprites â”€â”€ */
    .flower {
      position: absolute;
      top: 0; left: 0;
      cursor: pointer;
      will-change: transform;
      transition: filter 0.15s;
      image-rendering: pixelated;
    }
    .flower svg {
      display: block;
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }
    .flower:hover {
      filter: brightness(1.6) drop-shadow(0 0 10px rgba(255,180,255,0.9));
    }
    .flower.popped {
      filter: brightness(2.5) drop-shadow(0 0 18px #ff2d9e);
    }

    /* â”€â”€ Title â”€â”€ */
    #title {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 50;
      padding: 1.1rem 1rem 0.8rem;
      text-align: center;
      pointer-events: none;
      background: linear-gradient(rgba(10,0,20,0.9) 70%, transparent);
    }
    #title h1 {
      font-size: clamp(0.55rem, 2.2vw, 0.9rem);
      color: #ff2d9e;
      letter-spacing: 0.18em;
      text-shadow:
        0 0 8px #ff2d9e,
        0 0 24px rgba(255,45,158,0.6),
        2px 2px 0 #6600aa;
      animation: titlePulse 2s steps(2) infinite;
    }
    @keyframes titlePulse {
      0%, 100% { opacity: 1; }
      50%       { opacity: 0.85; }
    }

    /* â”€â”€ HUD â”€â”€ */
    #hud {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 50;
      padding: 0.6rem 0.9rem 0.5rem;
      background: rgba(0, 0, 0, 0.82);
      border: 2px solid #00ffef;
      box-shadow:
        0 0 0 2px #0a0014,
        0 0 0 4px #00ffef,
        0 0 16px rgba(0,255,239,0.35),
        inset 0 0 10px rgba(0,255,239,0.07);
      font-size: 0.5rem;
      color: #00ffef;
      text-shadow: 0 0 8px #00ffef;
      line-height: 1.9;
    }
    #hud .label { color: #006655; }
    #score { color: #ffdd00; text-shadow: 0 0 8px #ffdd00; }
    #remaining { color: #ff2d9e; text-shadow: 0 0 8px #ff2d9e; }

    /* â”€â”€ Compliment popup â”€â”€ */
    .compliment-popup {
      position: fixed;
      z-index: 500;
      pointer-events: none;
      min-width: 210px;
      max-width: 290px;
      background: #0f0020;
      border: 3px solid #ff2d9e;
      box-shadow:
        0 0 0 3px #0f0020,
        0 0 0 6px #ff2d9e,
        0 0 30px rgba(255,45,158,0.45),
        inset 0 0 20px rgba(255,45,158,0.07);
      animation: popupIn 0.15s steps(3) forwards;
    }
    @keyframes popupIn {
      from { transform: scale(0); opacity: 0; }
      to   { transform: scale(1); opacity: 1; }
    }
    .compliment-popup.fading {
      animation: popupOut 0.25s steps(3) forwards;
    }
    @keyframes popupOut {
      from { transform: scale(1); opacity: 1; }
      to   { transform: scale(0.7); opacity: 0; }
    }
    .popup-header {
      background: #ff2d9e;
      padding: 0.45rem 0.8rem;
      font-size: 0.45rem;
      color: #fff;
      letter-spacing: 0.12em;
      text-align: center;
      text-shadow: 1px 1px 0 #880044;
    }
    .popup-heart {
      display: inline-block;
      animation: heartBeat 0.5s steps(2) infinite;
    }
    @keyframes heartBeat {
      0%   { transform: scale(1); }
      50%  { transform: scale(1.35); }
      100% { transform: scale(1); }
    }
    .popup-body {
      padding: 0.85rem 0.9rem 1rem;
      font-size: 0.42rem;
      color: #ffcced;
      line-height: 2;
      text-align: center;
    }

    /* â”€â”€ Pixel burst particles â”€â”€ */
    .px-particle {
      position: fixed;
      width: 6px;
      height: 6px;
      z-index: 600;
      pointer-events: none;
      animation: pxFly 0.65s steps(8) forwards;
    }
    @keyframes pxFly {
      0%   { opacity: 1; transform: translate(0, 0) scale(1.5); }
      100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0.4); }
    }

    /* â”€â”€ Win screen â”€â”€ */
    #win-screen {
      position: fixed;
      inset: 0;
      z-index: 800;
      background: rgba(10,0,20,0.97);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 1.5rem;
      animation: winIn 0.3s steps(4) forwards;
    }
    @keyframes winIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }
    #win-screen.show { display: flex; }
    #win-screen h2 {
      font-size: clamp(1rem, 4vw, 2rem);
      color: #ffdd00;
      text-shadow: 0 0 20px #ffdd00, 3px 3px 0 #885500;
      animation: rainbowText 0.5s steps(6) infinite;
    }
    @keyframes rainbowText {
      0%   { color: #ff2d9e; text-shadow: 0 0 20px #ff2d9e, 3px 3px 0 #880044; }
      17%  { color: #ff6600; text-shadow: 0 0 20px #ff6600, 3px 3px 0 #883300; }
      34%  { color: #ffdd00; text-shadow: 0 0 20px #ffdd00, 3px 3px 0 #886600; }
      51%  { color: #39ff14; text-shadow: 0 0 20px #39ff14, 3px 3px 0 #1a7700; }
      68%  { color: #00ffef; text-shadow: 0 0 20px #00ffef, 3px 3px 0 #006655; }
      85%  { color: #bf00ff; text-shadow: 0 0 20px #bf00ff, 3px 3px 0 #550077; }
      100% { color: #ff2d9e; text-shadow: 0 0 20px #ff2d9e, 3px 3px 0 #880044; }
    }
    #win-screen p {
      font-size: clamp(0.45rem, 1.5vw, 0.65rem);
      color: #ffcced;
      line-height: 2.2;
      max-width: 500px;
      padding: 0 1rem;
    }
    #win-screen button {
      margin-top: 1rem;
      padding: 0.8rem 1.4rem;
      background: #ff2d9e;
      border: 3px solid #fff;
      box-shadow: 0 0 0 3px #ff2d9e, 0 0 20px rgba(255,45,158,0.5);
      color: #fff;
      font-family: 'Press Start 2P', monospace;
      font-size: 0.55rem;
      cursor: pointer;
      letter-spacing: 0.1em;
      transition: filter 0.1s;
    }
    #win-screen button:hover { filter: brightness(1.3); }
  </style>
</head>
<body>

<div id="bg"></div>
<div id="scanlines"></div>
<div id="vignette"></div>
<div id="garden"></div>

<div id="title"><h1>âœ¿ CLICK EVERY FLOWER âœ¿</h1></div>

<div id="hud">
  <span class="label">CLICKED&nbsp;&nbsp;</span><span id="score">00</span><br>
  <span class="label">REMAINING </span><span id="remaining">100</span>
</div>

<div id="win-screen">
  <h2>âœ¿ YOU DID IT! âœ¿</h2>
  <p>
    You found every single flower.<br>
    That means you're patient, curious,<br>
    and absolutely wonderful.<br>
    The garden is proud of you. â™¥
  </p>
  <button onclick="resetGame()">PLAY AGAIN</button>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PIXEL FLOWER DEFINITIONS
   Each map row is a string. Keys map to hex colors.
   '.' = transparent
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const PX = 5; // base px per pixel unit

const FLOWER_DEFS = [
  { // â”€â”€ Pink Tulip
    map: [
      '..pp..',
      '.pppp.',
      'pppppp',
      '.pppp.',
      '..pp..',
      '..gg..',
      '.ggg..',
      '..gg..',
    ],
    colors: { p:'#ff69b4', g:'#22c55e' }
  },
  { // â”€â”€ Yellow Sunflower
    map: [
      'y.y.y.',
      '.yyyyy',
      'yycyyy',
      '.yyyyy',
      'y.y.y.',
      '..gg..',
      '.ggg..',
      '..gg..',
    ],
    colors: { y:'#fde047', c:'#92400e', g:'#16a34a' }
  },
  { // â”€â”€ Purple Crystal Flower
    map: [
      '.p..p.',
      'pppppp',
      'p.cc.p',
      'pppppp',
      '.p..p.',
      '..gg..',
      '.ggg..',
      '..gg..',
    ],
    colors: { p:'#c026d3', c:'#fde047', g:'#15803d' }
  },
  { // â”€â”€ Cyan Star
    map: [
      'c.c.c.',
      '.ccccc',
      'cccccc',
      '.ccccc',
      'c.c.c.',
      '..gg..',
      '.ggg..',
      '..gg..',
    ],
    colors: { c:'#00ffef', g:'#22c55e' }
  },
  { // â”€â”€ Red Rose
    map: [
      '.rr.r.',
      '.rrrr.',
      'rrrrrr',
      '.rrrr.',
      '..rr..',
      '..gg..',
      '.ggg..',
      '..gg..',
    ],
    colors: { r:'#ff3030', g:'#16a34a' }
  },
  { // â”€â”€ White Daisy
    map: [
      '.w..w.',
      '.wwww.',
      'wwyyWW',
      '.wwww.',
      '.w..w.',
      '..gg..',
      '.ggg..',
      '..gg..',
    ],
    colors: { w:'#f0f0ff', y:'#fde047', W:'#fde047', g:'#22c55e' }
  },
  { // â”€â”€ Orange Marigold
    map: [
      'o..o..',
      '.oooo.',
      'ooccoo',
      '.oooo.',
      'o..o..',
      '..gg..',
      '.ggg..',
      '..gg..',
    ],
    colors: { o:'#fb923c', c:'#fde047', g:'#15803d' }
  },
  { // â”€â”€ Neon Lime Bloom
    map: [
      '.ll.l.',
      'llllll',
      'l.cc.l',
      'llllll',
      '.ll.l.',
      '..gg..',
      '.ggg..',
      '..gg..',
    ],
    colors: { l:'#39ff14', c:'#fff', g:'#16a34a' }
  },
];

/* â”€â”€ Generate SVG for a flower def at a given display scale â”€â”€ */
function makeSVG(def, scale) {
  const map    = def.map;
  const colors = def.colors;
  const rows   = map.length;
  const cols   = map[0].length;
  const svgW   = cols * PX;
  const svgH   = rows * PX;
  const dispW  = Math.round(svgW * scale);
  const dispH  = Math.round(svgH * scale);

  let rects = '';
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      const k = map[r][c];
      if (k === '.') continue;
      const col = colors[k] || '#ff00ff';
      rects += `<rect x="${c*PX}" y="${r*PX}" width="${PX}" height="${PX}" fill="${col}"/>`;
    }
  }

  return {
    svgStr: `<svg xmlns="http://www.w3.org/2000/svg" width="${dispW}" height="${dispH}" viewBox="0 0 ${svgW} ${svgH}" shape-rendering="crispEdges">${rects}</svg>`,
    w: dispW,
    h: dispH,
  };
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMPLIMENTS  (100 unique ones)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const COMPLIMENTS = [
  "You light up every room you walk into",
  "Your smile could cure a bad day",
  "You make people feel genuinely seen",
  "The world is so much better with you in it",
  "You are braver than you will ever know",
  "Your laugh is absolutely contagious",
  "You have incredible strength",
  "People feel genuinely lucky to know you",
  "Your creativity is one of a kind",
  "You make hard things look effortless",
  "You are a rare kind of thoughtful",
  "You have such a beautiful heart",
  "The way you care for others is extraordinary",
  "You are more capable than you think",
  "Your perspective always adds something special",
  "You have a real gift for truly listening",
  "You make people feel deeply valued",
  "You are a constant source of inspiration",
  "Your warmth is something people never forget",
  "You bring out the best in everyone around you",
  "You are quietly brilliant",
  "You see the things that really matter",
  "You genuinely make a difference",
  "Your energy is uplifting just to be around",
  "You handle everything with such grace",
  "You are more loved than you realise",
  "You have a wonderful way with words",
  "You make ordinary moments feel magical",
  "Your resilience is truly something to admire",
  "You have such a big and generous spirit",
  "You make people feel like they belong",
  "You are the reason someone smiled today",
  "Your kindness never goes unnoticed",
  "You have this quiet confidence that is magnetic",
  "You are exceptionally good at what you do",
  "You make caring for others look so easy",
  "People trust you without even thinking twice",
  "Your passion for life is absolutely infectious",
  "You have wisdom well beyond your years",
  "You make everything just a little more beautiful",
  "You are a genuinely good human being",
  "The care you put into things really shows",
  "You are the kind of friend everyone wishes they had",
  "You face every challenge with real courage",
  "Your enthusiasm is a gift to everyone around you",
  "You have a wonderful sense of humour",
  "You are thoughtful in the ways that count most",
  "You bring such great energy to everything you do",
  "Your presence is truly a gift to others",
  "You make people feel deeply heard",
  "You are radiant inside and out",
  "The way you think is genuinely remarkable",
  "You make the world a kinder, gentler place",
  "You have an amazing ability to see good in people",
  "You are so incredibly easy to be around",
  "Your determination is truly inspiring",
  "You carry yourself with such quiet dignity",
  "You are someone who changes things for the better",
  "You have a genuinely lovely soul",
  "You are more than enough, exactly as you are",
  "You make difficult things feel possible",
  "You are so deeply appreciated",
  "Your compassion truly sets you apart",
  "You are extraordinarily thoughtful",
  "You inspire people without even trying to",
  "You are someone genuinely worth knowing",
  "The world needs so many more people like you",
  "You have such real and beautiful courage",
  "You are wonderfully, brilliantly unique",
  "You make people feel completely safe",
  "Your generosity is something so very special",
  "You see things that most people miss entirely",
  "You are brilliantly, unapologetically yourself",
  "You make every place a little warmer",
  "Your integrity is rare and genuinely beautiful",
  "You are one of a kind in the very best way",
  "You show up for people in ways that truly matter",
  "You have a magnetic and irresistible kindness",
  "You make people believe in themselves again",
  "You are endlessly, effortlessly wonderful",
  "You have the most beautiful energy about you",
  "You face every hard thing with quiet admiration",
  "You are appreciated by far more people than you know",
  "Your instincts are remarkably, wonderfully good",
  "You have a real and rare gift for human connection",
  "People feel genuinely lucky to have met you",
  "You carry light with you wherever you go",
  "You make people better just by knowing you",
  "You are so much braver than you ever feel",
  "Your heart is truly one of the finest things",
  "You have a remarkable ability to find joy",
  "You are patient in the most beautiful of ways",
  "You shine so brightly, even on your hardest days",
  "You are a genuinely wonderful presence in this world",
  "You have such an open and generous heart",
  "You make people feel like the best version of themselves",
  "You are remarkable in the most real, honest way",
  "You have so much more to give â€” and you already give so much",
  "You are, truly and completely, a gift",
  "The simple fact that you exist makes everything better",
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   8-BIT AUDIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let audioCtx = null;
const SCALE = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88, 523.25, 587.33, 659.25];

function playBlip(noteIndex) {
  try {
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const osc  = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    osc.type = 'square';
    osc.frequency.value = SCALE[noteIndex % SCALE.length];
    gain.gain.setValueAtTime(0.07, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.22);
    osc.start(audioCtx.currentTime);
    osc.stop(audioCtx.currentTime + 0.22);
  } catch (e) {}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CREATE FLOWERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const FLOWER_COUNT = 100;
const garden       = document.getElementById('garden');
const flowers      = [];

// Shuffle compliments so each flower gets a unique one
const shuffledCompliments = [...COMPLIMENTS].sort(() => Math.random() - 0.5);

for (let i = 0; i < FLOWER_COUNT; i++) {
  const defIndex = i % FLOWER_DEFS.length;
  const def      = FLOWER_DEFS[defIndex];
  const scale    = 1.0 + Math.random() * 1.8;   // 1x â€“ 2.8x
  const { svgStr, w, h } = makeSVG(def, scale);

  const el = document.createElement('div');
  el.className = 'flower';
  el.innerHTML = svgStr;
  garden.appendChild(el);

  const speed = 0.45 + Math.random() * 0.8;
  const angle = Math.random() * Math.PI * 2;

  const flower = {
    el,
    x:         Math.random() * (window.innerWidth  - w),
    y:         Math.random() * (window.innerHeight - h),
    dx:        Math.cos(angle) * speed,
    dy:        Math.sin(angle) * speed,
    rotation:  Math.random() * 360,
    rotSpeed:  (Math.random() - 0.5) * 1.2,
    w, h,
    compliment: shuffledCompliments[i] || COMPLIMENTS[i % COMPLIMENTS.length],
    noteIndex:  i % SCALE.length,
    clicked:    false,
  };

  el.addEventListener('click', (e) => handleClick(e, flower));
  flowers.push(flower);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATION LOOP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function animate() {
  const W = window.innerWidth;
  const H = window.innerHeight;

  for (const f of flowers) {
    f.x += f.dx;
    f.y += f.dy;
    f.rotation += f.rotSpeed;

    if (f.x <= 0)      { f.x = 0;      f.dx =  Math.abs(f.dx); }
    if (f.y <= 0)      { f.y = 0;      f.dy =  Math.abs(f.dy); }
    if (f.x >= W - f.w){ f.x = W - f.w; f.dx = -Math.abs(f.dx); }
    if (f.y >= H - f.h){ f.y = H - f.h; f.dy = -Math.abs(f.dy); }

    f.el.style.transform = `translate(${Math.round(f.x)}px, ${Math.round(f.y)}px) rotate(${f.rotation.toFixed(1)}deg)`;
  }

  requestAnimationFrame(animate);
}
animate();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CLICK HANDLER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let score    = 0;
const scoreEl     = document.getElementById('score');
const remainingEl = document.getElementById('remaining');

function handleClick(e, flower) {
  if (flower.clicked) return;  // each flower only counts once
  e.stopPropagation();

  flower.clicked = true;
  score++;
  scoreEl.textContent    = String(score).padStart(2, '0');
  remainingEl.textContent = String(FLOWER_COUNT - score).padStart(2, '0');

  // Sound
  playBlip(flower.noteIndex);

  // Flash the flower
  flower.el.classList.add('popped');
  setTimeout(() => flower.el.classList.remove('popped'), 350);

  // Pixel burst
  spawnBurst(e.clientX, e.clientY);

  // Compliment popup
  showCompliment(e.clientX, e.clientY, flower.compliment);

  // Win condition
  if (score === FLOWER_COUNT) {
    setTimeout(showWinScreen, 1200);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PIXEL BURST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const NEON = ['#ff2d9e','#00ffef','#ffdd00','#39ff14','#bf00ff','#ff6600','#ffffff'];

function spawnBurst(cx, cy) {
  const count = 14;
  for (let i = 0; i < count; i++) {
    const p     = document.createElement('div');
    p.className = 'px-particle';
    const color = NEON[i % NEON.length];
    p.style.cssText = `
      background: ${color};
      box-shadow: 0 0 6px ${color};
      left: ${cx}px;
      top:  ${cy}px;
    `;
    const angle = (i / count) * Math.PI * 2 + (Math.random() - 0.5) * 0.5;
    const dist  = 50 + Math.random() * 70;
    p.style.setProperty('--tx', Math.round(Math.cos(angle) * dist) + 'px');
    p.style.setProperty('--ty', Math.round(Math.sin(angle) * dist) + 'px');
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 700);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMPLIMENT POPUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showCompliment(cx, cy, text) {
  const popup = document.createElement('div');
  popup.className = 'compliment-popup';
  popup.innerHTML = `
    <div class="popup-header">
      <span class="popup-heart">â™¥</span> COMPLIMENT <span class="popup-heart">â™¥</span>
    </div>
    <div class="popup-body">${text}</div>
  `;

  // Keep within viewport
  let x = cx - 145;
  let y = cy - 145;
  x = Math.max(8, Math.min(x, window.innerWidth  - 305));
  y = Math.max(8, Math.min(y, window.innerHeight - 160));
  popup.style.left = x + 'px';
  popup.style.top  = y + 'px';

  document.body.appendChild(popup);

  setTimeout(() => {
    popup.classList.add('fading');
    setTimeout(() => popup.remove(), 280);
  }, 3800);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WIN SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showWinScreen() {
  playWinJingle();
  document.getElementById('win-screen').classList.add('show');
}

function playWinJingle() {
  const melody = [523.25, 659.25, 783.99, 1046.50, 783.99, 1046.50];
  const timing = [0, 0.18, 0.36, 0.54, 0.8, 1.0];
  try {
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    melody.forEach((freq, i) => {
      const osc  = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain); gain.connect(audioCtx.destination);
      osc.type = 'square';
      osc.frequency.value = freq;
      const t = audioCtx.currentTime + timing[i];
      gain.gain.setValueAtTime(0.09, t);
      gain.gain.exponentialRampToValueAtTime(0.001, t + 0.25);
      osc.start(t); osc.stop(t + 0.28);
    });
  } catch(e) {}
}

function resetGame() {
  score = 0;
  scoreEl.textContent    = '00';
  remainingEl.textContent = String(FLOWER_COUNT).padStart(2, '0');
  flowers.forEach(f => {
    f.clicked = false;
    f.el.style.filter = '';
  });
  document.getElementById('win-screen').classList.remove('show');
}

/* Handle window resize â€” keep flowers in bounds */
window.addEventListener('resize', () => {
  for (const f of flowers) {
    f.x = Math.min(f.x, window.innerWidth  - f.w);
    f.y = Math.min(f.y, window.innerHeight - f.h);
  }
});
</script>
</body>
</html>
